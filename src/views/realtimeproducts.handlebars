<section class="page">
  <header class="page-header">
    <div>
      <h1 class="page-title">Productos en tiempo real</h1>
      <p class="page-subtitle">
        Agregá o eliminá productos y mirá cómo se actualiza el listado al instante.
      </p>
    </div>

    <nav class="page-actions">
      <a href="/" class="btn btn-outline">Volver al listado normal</a>
      <a href="/api/products" class="btn btn-ghost" target="_blank">Ver API JSON</a>
    </nav>
  </header>


  <section class="realtime-layout">

    <section class="panel">
      <header class="panel__header">
        <h2 class="panel__title">Crear producto</h2>
        <p class="panel__subtitle">
          Completá los campos para crear un nuevo producto.
        </p>
      </header>

      <form id="productForm" class="form-grid">
        <input
          name="title"
          placeholder="Título"
          class="input"
          required
        />
        <input
          name="description"
          placeholder="Descripción"
          class="input"
          required
        />
        <input
          type="number"
          name="price"
          placeholder="Precio"
          class="input"
          min="0"
          required
        />
        <input
          name="category"
          placeholder="Categoría"
          class="input"
          required
        />
        <input
          name="code"
          placeholder="Código"
          class="input"
          required
        />
        <input
          type="number"
          name="stock"
          placeholder="Stock"
          class="input"
          min="0"
          required
        />

        <div class="form-actions">
          <button type="submit" class="btn btn-primary">
            Crear
          </button>
        </div>
      </form>
    </section>


    <section class="panel">
      <header class="panel__header">
        <h2 class="panel__title">Eliminar producto</h2>
        <p class="panel__subtitle">
          Indicá el ID del producto que querés eliminar.
        </p>
      </header>

      <form id="deleteForm" class="form-inline">
        <input
          name="id"
          placeholder="ID del producto a eliminar"
          class="input"
          type="number"
          min="1"
          required
        />
        <button type="submit" class="btn btn-outline">
          Eliminar
        </button>
      </form>
    </section>
  </section>


  <section class="panel panel-products">
    <header class="panel__header">
      <h2 class="panel__title">Listado (tiempo real)</h2>
      <p class="panel__subtitle">
        Esta lista se actualiza automáticamente cuando se crean o eliminan productos.
      </p>
    </header>

    <div id="productsContainer" class="products-grid">
      {{#each products}}
        <article class="product-card">
          <header class="product-card__header">
            <h3 class="product-card__title">{{this.title}}</h3>
            <span class="product-card__price">${{this.price}}</span>
          </header>

          <p class="product-card__description">
            {{this.description}}
          </p>

          <ul class="product-card__meta">
            <li><strong>Categoría:</strong> {{this.category}}</li>
            <li><strong>Código:</strong> {{this.code}}</li>
            <li><strong>Stock:</strong> {{this.stock}}</li>
            <li><strong>ID:</strong> {{this.id}}</li>
          </ul>
        </article>
      {{/each}}
    </div>
  </section>

  <script src="/socket.io/socket.io.js"></script>
  <script src="/realtime.js"></script>
</section>
